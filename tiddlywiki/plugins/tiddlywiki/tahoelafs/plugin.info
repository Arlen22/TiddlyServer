{"title":"$:/plugins/tiddlywiki/tahoelafs","description":"Tahoe-LAFS saver","author":"JeremyRuston","core-version":">=5.0.0","list":"readme","version":"5.1.18-prerelease","plugin-type":"plugin","dependents":"","type":"application/json","tiddlers":{"$:/plugins/tiddlywiki/tahoelafs/readme":{"title":"$:/plugins/tiddlywiki/tahoelafs/readme","text":"This plugin provides a ''saver'' module for saving changes under the [[Tahoe Least Authority File System|https://tahoe-lafs.org/]].\n\nAt this point it is largely for experimentation by @zooko.\n\n[[Source code|https://github.com/Jermolene/TiddlyWiki5/blob/master/plugins/tiddlywiki/tahoelafs]]\r\n"},"$:/plugins/tiddlywiki/tahoelafs/saver.js":{"title":"$:/plugins/tiddlywiki/tahoelafs/saver.js","text":"/*\\\r\ntitle: $:/plugins/tiddlywiki/tahoelafs/saver.js\r\ntype: application/javascript\r\nmodule-type: saver\r\n\r\nA bare bones saver for Tahoe-LAFS. It just PUTs the new HTML file back to the server at the same URL.\r\n\r\n\\*/\r\n(function(){\r\n\r\n/*jslint node: true, browser: true */\r\n/*global $tw: false */\r\n\"use strict\";\r\n\r\n/*\r\nSelect the appropriate saver module and set it up\r\n*/\r\nvar TahoeSaver = function(wiki) {\r\n\tthis.wiki = wiki;\r\n};\r\n\r\nTahoeSaver.prototype.save = function(text) {\r\n\t// Do the HTTP post\r\n\tvar http = new XMLHttpRequest();\r\n\thttp.open(\"PUT\",document.location.toString(),true);\r\n\thttp.onreadystatechange = function() {\r\n\t\tif(http.readyState == 4 && http.status == 200) {\r\n\t\t\twindow.alert(\"Saved to Tahoe-LAFS: \" + http.responseText);\r\n\t\t}\r\n\t};\r\n\thttp.send(text);\r\n\treturn true;\r\n};\r\n\r\n/*\r\nInformation about this saver\r\n*/\r\nTahoeSaver.prototype.info = {\r\n\tname: \"tahoelafs\",\r\n\tpriority: 1000\r\n};\r\n\r\n/*\r\nStatic method that returns true if this saver is capable of working\r\n*/\r\nexports.canSave = function(wiki) {\r\n\treturn true;\r\n};\r\n\r\n/*\r\nCreate an instance of this saver\r\n*/\r\nexports.create = function(wiki) {\r\n\treturn new TahoeSaver(wiki);\r\n};\r\n\r\n})();\r\n","type":"application/javascript","module-type":"saver"}}}