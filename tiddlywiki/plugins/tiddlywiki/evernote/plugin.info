{"title":"$:/plugins/tiddlywiki/evernote","description":"Evernote migration tools","author":"JeremyRuston","core-version":">=5.0.0","list":"readme docs","version":"5.1.18-prerelease","plugin-type":"plugin","dependents":"","type":"application/json","tiddlers":{"$:/plugins/tiddlywiki/evernote/docs":{"title":"$:/plugins/tiddlywiki/evernote/docs","text":"! Introduction\n\n"},"$:/plugins/tiddlywiki/evernote/modules/enex-deserializer.js":{"title":"$:/plugins/tiddlywiki/evernote/modules/enex-deserializer.js","text":"/*\\\r\ntitle: $:/plugins/tiddlywiki/evernote/modules/enex-deserializer.js\r\ntype: application/javascript\r\nmodule-type: tiddlerdeserializer\r\n\r\nENEX file deserializer\r\n\r\nFor details see: https://blog.evernote.com/tech/2013/08/08/evernote-export-format-enex/\r\n\r\n\\*/\r\n(function(){\r\n\r\n/*jslint node: true, browser: true */\r\n/*global $tw: false */\r\n\"use strict\";\r\n\r\n// DOMParser = require(\"$:/plugins/tiddlywiki/xmldom/dom-parser\").DOMParser;\r\n\r\n/*\r\nParse an ENEX file into tiddlers\r\n*/\r\nexports[\"application/enex+xml\"] = function(text,fields) {\r\n\t// Collect output tiddlers in an array\r\n\tvar results = [];\r\n\t// Parse the XML document\r\n\tvar parser = new DOMParser(),\r\n\t\tdoc = parser.parseFromString(text,\"application/xml\");\r\n\t// Output a report tiddler with information about the import\r\n\tvar enex = doc.querySelector(\"en-export\");\r\n\tresults.push({\r\n\t\ttitle: \"Evernote Import Report\",\r\n\t\ttext: \"Evernote file imported on \" + enex.getAttribute(\"export-date\") + \" from \" + enex.getAttribute(\"application\") + \" (\" + enex.getAttribute(\"version\") + \")\"\r\n\t})\r\n\t// Get all the \"note\" nodes\r\n\tvar noteNodes = doc.querySelectorAll(\"note\");\r\n\t$tw.utils.each(noteNodes,function(noteNode) {\r\n\t\tvar result = {\r\n\t\t\ttitle: getTextContent(noteNode,\"title\"),\r\n\t\t\ttype: \"text/html\",\r\n\t\t\ttags: [],\r\n\t\t\ttext: getTextContent(noteNode,\"content\"),\r\n\t\t\tmodified: convertDate(getTextContent(noteNode,\"created\")),\r\n\t\t\tcreated:  convertDate(getTextContent(noteNode,\"created\"))\r\n\r\n\t\t};\r\n\t\t$tw.utils.each(noteNode.querySelectorAll(\"tag\"),function(tagNode) {\r\n\t\t\tresult.tags.push(tagNode.textContent);\r\n\t\t});\r\n\t\t// If there's an update date, set modifiy date accordingly\r\n\t\tvar update = getTextContent(noteNode,\"updated\");\r\n\t\tif(update) {\r\n\t\t\tresult.modified = convertDate(update);\r\n\t\t}\r\n\t\t$tw.utils.each(noteNode.querySelectorAll(\"note-attributes>*\"),function(attrNode) {\r\n\t\t\tresult[attrNode.tagName] = attrNode.textContent;\r\n\t\t});\r\n\t\tresults.push(result);\r\n\t\t$tw.utils.each(noteNode.querySelectorAll(\"resource\"),function(resourceNode) {\r\n\t\t\tresults.push({\r\n\t\t\t\ttitle: getTextContent(resourceNode,\"resource-attributes>file-name\"),\r\n\t\t\t\ttype: getTextContent(resourceNode,\"mime\"),\r\n\t\t\t\twidth: getTextContent(resourceNode,\"width\"),\r\n\t\t\t\theight: getTextContent(resourceNode,\"height\"),\r\n\t\t\t\ttext: getTextContent(resourceNode,\"data\")\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\t// Return the output tiddlers\r\n\treturn results;\r\n};\r\n\r\nfunction getTextContent(node,selector) {\r\n\treturn (node.querySelector(selector) || {}).textContent;\r\n}\r\n\r\nfunction convertDate(isoDate) {\r\n\treturn (isoDate || \"\").replace(\"T\",\"\").replace(\"Z\",\"\") + \"000\"\r\n}\r\n\r\n})();\r\n","type":"application/javascript","module-type":"tiddlerdeserializer"},"$:/plugins/tiddlywiki/evernote/readme":{"title":"$:/plugins/tiddlywiki/evernote/readme","text":"This plugin contains tool to assist migration of content from Evernote ENEX files.\n\n!! Instructions\n\n# Download or save your ENEX file from Evernote\r\n# Rename the file to have an `.enex` extension\r\n# Drag the file into the TiddlyWiki browser window\r\n## Alternatively, click the \"Import\" button in the \"Tools\" sidebar tab\r\n# Review and accept the converted tiddlers\r\n"}}}