{"title":"$:/plugins/tiddlywiki/pluginlibrary","description":"Plugin library builder","author":"JeremyRuston","core-version":">=5.0.0","list":"readme","version":"5.1.18-prerelease","plugin-type":"plugin","dependents":"","type":"application/json","tiddlers":{"$:/plugins/tiddlywiki/pluginlibrary/asset-list-json":{"title":"$:/plugins/tiddlywiki/pluginlibrary/asset-list-json","text":"`var assetList = `<$view tiddler=\"$:/UpgradeLibrary/List\"/>`;\r\n`"},"$:/plugins/tiddlywiki/pluginlibrary/library.template.html":{"title":"$:/plugins/tiddlywiki/pluginlibrary/library.template.html","text":"\\rules only filteredtranscludeinline transcludeinline\r\n<!doctype html>\r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n<meta name=\"application-name\" content=\"TiddlyWiki Plugin Library\" />\r\n<meta name=\"application-version\" content=\"v0.0.0\" />\r\n<meta name=\"copyright\" content=\"Copyright 2015 Jeremy Ruston\" />\r\n<link id=\"faviconLink\" rel=\"shortcut icon\" href=\"favicon.ico\">\r\n<title>Plugin Library</title>\r\n<script>\r\n{{$:/plugins/tiddlywiki/pluginlibrary/asset-list-json}}\r\n{{$:/plugins/tiddlywiki/pluginlibrary/libraryserver.js}}\r\n</script>\r\n</head>\r\n<body>\n\n<h1>HelloThere</h1>\n\n<p>This is the TiddlyWiki plugin library. It is not intended to be opened directly in the browser.</p>\n\n<p>See <a href=\"https://tiddlywiki.com/\" target=\"_blank\">https://tiddlywiki.com/</a> for details of how to install plugins.</p>\n\n</body>\r\n</html>"},"$:/plugins/tiddlywiki/pluginlibrary/libraryserver.js":{"title":"$:/plugins/tiddlywiki/pluginlibrary/libraryserver.js","text":"/*\\\r\ntitle: $:/plugins/tiddlywiki/pluginlibrary/libraryserver.js\r\ntype: application/javascript\r\nmodule-type: library\r\n\r\nA simple HTTP-over-window.postMessage implementation of a standard TiddlyWeb-compatible server. It uses real HTTP to load the individual tiddler JSON files.\r\n\r\n\\*/\r\n(function(){\r\n\r\n/*jslint node: true, browser: true */\r\n/*global $tw: false */\r\n\"use strict\";\r\n\r\n// Listen for window messages\r\nwindow.addEventListener(\"message\",function listener(event){\r\n\tconsole.log(\"plugin library: Received message from\",event.origin);\r\n\tconsole.log(\"plugin library: Message content\",event.data);\r\n\tswitch(event.data.verb) {\r\n\t\tcase \"GET\":\r\n\t\t\tif(event.data.url === \"recipes/library/tiddlers.json\") {\r\n\t\t\t\t// Route for recipes/library/tiddlers.json\r\n\t\t\t\tevent.source.postMessage({\r\n\t\t\t\t\tverb: \"GET-RESPONSE\",\r\n\t\t\t\t\tstatus: \"200\",\r\n\t\t\t\t\tcookies: event.data.cookies,\r\n\t\t\t\t\turl: event.data.url,\r\n\t\t\t\t\ttype: \"application/json\",\r\n\t\t\t\t\tbody: JSON.stringify(assetList,null,4)\r\n\t\t\t\t},\"*\");\r\n\t\t\t} else if(event.data.url.indexOf(\"recipes/library/tiddlers/\") === 0) {\r\n\t\t\t\tvar url = \"recipes/library/tiddlers/\" + encodeURIComponent(removePrefix(event.data.url,\"recipes/library/tiddlers/\"));\r\n\t\t\t\t// Route for recipes/library/tiddlers/<uri-encoded-tiddler-title>.json\r\n\t\t\t\thttpGet(url,function(err,responseText) {\r\n\t\t\t\t\tif(err) {\r\n\t\t\t\t\t\tevent.source.postMessage({\r\n\t\t\t\t\t\t\tverb: \"GET-RESPONSE\",\r\n\t\t\t\t\t\t\tstatus: \"404\",\r\n\t\t\t\t\t\t\tcookies: event.data.cookies,\r\n\t\t\t\t\t\t\turl: event.data.url,\r\n\t\t\t\t\t\t\ttype: \"text/plain\",\r\n\t\t\t\t\t\t\tbody: \"Not found\"\r\n\t\t\t\t\t\t},\"*\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tevent.source.postMessage({\r\n\t\t\t\t\t\t\tverb: \"GET-RESPONSE\",\r\n\t\t\t\t\t\t\tstatus: \"200\",\r\n\t\t\t\t\t\t\tcookies: event.data.cookies,\r\n\t\t\t\t\t\t\turl: event.data.url,\r\n\t\t\t\t\t\t\ttype: \"application/json\",\r\n\t\t\t\t\t\t\tbody: responseText\r\n\t\t\t\t\t\t},\"*\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tevent.source.postMessage({\r\n\t\t\t\t\tverb: \"GET-RESPONSE\",\r\n\t\t\t\t\tstatus: \"404\",\r\n\t\t\t\t\tcookies: event.data.cookies,\r\n\t\t\t\t\turl: event.data.url,\r\n\t\t\t\t\ttype: \"text/plain\",\r\n\t\t\t\t\tbody: \"Not found\"\r\n\t\t\t\t},\"*\");\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n},false);\r\n\r\n// Helper to remove string prefixes\r\nfunction removePrefix(string,prefix) {\r\n\tif(string.indexOf(prefix) === 0) {\r\n\t\treturn string.substr(prefix.length);\r\n\t} else {\r\n\t\treturn string;\r\n\t}\r\n}\r\n\r\n// Helper for HTTP GET\r\nfunction httpGet(url,callback) {\r\n\tvar http = new XMLHttpRequest();\r\n\thttp.open(\"GET\",url,true);\r\n\thttp.onreadystatechange = function() {\r\n\t\tif(http.readyState == 4 && http.status == 200) {\r\n\t\t\tcallback(null,http.responseText);\r\n\t\t}\r\n\t};\r\n\thttp.send();\r\n}\r\n\r\n})();\r\n","type":"application/javascript","module-type":"library"},"$:/plugins/tiddlywiki/pluginlibrary/readme":{"title":"$:/plugins/tiddlywiki/pluginlibrary/readme","text":"This plugin is used behind the scenes by TiddlyWiki to build the plugin library.\n\n[[Source code|https://github.com/Jermolene/TiddlyWiki5/blob/master/plugins/tiddlywiki/pluginlibrary]]\r\n"}}}