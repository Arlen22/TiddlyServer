{"title":"$:/plugins/tiddlywiki/comments","description":"Comments","author":"JeremyRuston","core-version":">=5.0.0","list":"readme config","version":"5.1.18-prerelease","plugin-type":"plugin","dependents":"","type":"application/json","tiddlers":{"$:/plugins/tiddlywiki/comments/add-comment-button":{"title":"$:/plugins/tiddlywiki/comments/add-comment-button","text":"<$reveal state=\"$:/status/IsReadOnly\" type=\"match\" text=\"no\" default=\"no\" tag=\"div\" class=\"tc-comment-button\">\r\n<$button class=\"tc-btn-invisible\">\r\n<$set name=\"username\" value={{$:/status/UserName}} emptyValue=\"(anonymous)\">\r\n<$action-createtiddler $basetitle={{{ [[Comment by ']addsuffix<username>addsuffix[' on ']addsuffix<currentTiddler>addsuffix[']] }}} comment-target=<<currentTiddler>> text=\"\" edit-mode=\"yes\"/>\r\n</$set>\r\nadd comment {{$:/core/images/add-comment}}\r\n</$button>\r\n</$reveal>\r\n"},"$:/plugins/tiddlywiki/comments/comments-template":{"title":"$:/plugins/tiddlywiki/comments/comments-template","text":"<div class=\"tc-comments\">\r\n<ol class=\"tc-comment-list\">\r\n<$list filter=\"[all[tiddlers+shadows]comment-target<currentTiddler>sort[created]!has[draft.of]]\">\r\n<li>\r\n<div class=\"tc-comment-entry\">\r\n<div class=\"tc-comment-entry-heading\">\r\n<$link>{{!!creator}} at <$view field=\"modified\" format=\"date\" template=\"0hh:0mm:0ss DDD DDth MMM YYYY\"/></$link>\r\n<$reveal state=\"$:/status/IsReadOnly\" type=\"match\" text=\"no\" default=\"no\" tag=\"span\">\r\n<$reveal type=\"match\" state=\"!!edit-mode\" text=\"yes\">\r\n<$button>\r\n<$action-setfield $tiddler=<<currentTiddler>> $field=\"edit-mode\" $value=\"no\"/>\r\n<$action-setfield $tiddler=<<currentTiddler>> $field=\"text\" $value={{!!saved-text}}/>\r\ncancel\r\n</$button>\r\n<$button>\r\n<$action-deletetiddler $tiddler=<<currentTiddler>>/>\r\ndelete\r\n</$button>\r\n<$button>\r\n<$action-setfield $tiddler=<<currentTiddler>> $field=\"edit-mode\" $value=\"no\"/>\r\nsave\r\n</$button>\r\n</$reveal>\r\n<$reveal type=\"nomatch\" state=\"!!edit-mode\" text=\"yes\">\r\n<$button>\r\n<$action-setfield $tiddler=<<currentTiddler>> $field=\"edit-mode\" $value=\"yes\"/>\r\n<$action-setfield $tiddler=<<currentTiddler>> $field=\"saved-text\" $value={{!!text}}/>\r\nedit\r\n</$button>\r\n</$reveal>\r\n</$reveal>\r\n</div>\r\n<div class=\"tc-comment-entry-body\">\r\n<$reveal type=\"match\" state=\"!!edit-mode\" text=\"yes\">\r\n<$edit-text tiddler=<<currentTiddler>> tag=\"textarea\"/>\r\n</$reveal>\r\n<$reveal type=\"nomatch\" state=\"!!edit-mode\" text=\"yes\">\r\n<$transclude tiddler=<<currentTiddler>> mode=\"block\"/>\r\n<$transclude tiddler=\"$:/plugins/tiddlywiki/comments/add-comment-button\" mode=\"inline\"/>\r\n</$reveal>\r\n</div>\r\n</div>\r\n<$transclude tiddler=\"$:/plugins/tiddlywiki/comments/comments-template\" mode=\"inline\"/>\r\n</li>\r\n</$list>\r\n</ol>\r\n</div>\r\n"},"$:/plugins/tiddlywiki/comments/config":{"title":"$:/plugins/tiddlywiki/comments/config","text":"\\define select(description,filter)\r\n<$button>\r\n<$action-setfield $tiddler=\"$:/config/Comments/EnableFilter\" $value=<<__filter__>>/>\r\n$description$\r\n</$button>\r\n\\end\n\nThis filter expression determines which tiddlers will have commenting enabled:\n\n<$edit-text tiddler=\"$:/config/Comments/EnableFilter\" tag=\"input\"/>\n\nOr you can choose a preselected filter:\n\n* <<select \"All tiddlers except system tiddlers\" \"[all[current]!is[system]]\">>\r\n* <<select \"Only tiddlers tagged 'commentable'\" \"[all[current]tag[commentable]]\">>\r\n* <<select \"Disable all commenting\" \"\">>\r\n"},"$:/config/Comments/EnableFilter":{"title":"$:/config/Comments/EnableFilter","text":"[all[current]!is[system]]\r\n"},"$:/plugins/tiddlywiki/comments/footer-view-template-segment":{"title":"$:/plugins/tiddlywiki/comments/footer-view-template-segment","tags":"$:/tags/ViewTemplate","list-after":"$:/core/ui/ViewTemplate/body","text":"<$list filter={{$:/config/Comments/EnableFilter}} variable=\"ignore\">\r\n<div class=\"tc-comments-segment\">\r\n<$transclude tiddler=\"$:/plugins/tiddlywiki/comments/add-comment-button\" mode=\"inline\"/>\r\n<$transclude tiddler=\"$:/plugins/tiddlywiki/comments/comments-template\" mode=\"inline\"/>\r\n</div>\r\n</$list>"},"$:/plugins/tiddlywiki/comments/header-view-template-segment":{"title":"$:/plugins/tiddlywiki/comments/header-view-template-segment","tags":"$:/tags/ViewTemplate","list-before":"$:/core/ui/ViewTemplate/body","text":"<$list filter=\"[all[current]has[comment-target]]\" variable=\"ignore\">\r\n<div class=\"tc-is-comment-header\">\r\nThis tiddler is a comment on <$link to={{!!comment-target}}><$text text={{!!comment-target}}/></$link>\r\n</div>\r\n</$list>\r\n"},"$:/plugins/tiddlywiki/comments/readme":{"title":"$:/plugins/tiddlywiki/comments/readme","text":"This plugin provides a simple means for adding threaded comments to tiddlers.\n\n* Click the \"add comment\" button to make a new comment, and then click the \"save\" button to save it\r\n* You can comment on a tiddler itself, or add a comment to an existing comment\r\n* The sidebar tab ''Comments'' lists a timeline of all comments\r\n* Comments are attributed to the username stored in the system tiddler [[$:/status/UserName]]\r\n* By default, comments are available on all non-system tiddlers. The ''config'' tab lets you customise which tiddlers can accept comments by specifying a filter extension\r\n* The buttons for adding and editing comments are only available if the system tiddler [[$:/status/IsReadOnly]] is not set to `yes`\r\n"},"$:/plugins/tiddlywiki/comments/sidebar":{"title":"$:/plugins/tiddlywiki/comments/sidebar","tags":"$:/tags/SideBar","caption":"Comments","text":"<div class=\"tc-timeline\">\r\n<$list filter=\"[all[tiddlers+shadows]has[comment-target]has[modified]!sort[modified]eachday[modified]]\">\r\n<div class=\"tc-menu-list-item\">\r\n<$view field=\"modified\" format=\"date\" template=\"DDth MMM YYYY\"/>\r\n<$list filter=\"[all[tiddlers+shadows]has[comment-target]sameday:modified{!!modified}!sort[modified]]\">\r\n<div class=\"tc-menu-list-subitem\">\r\n<$link>Comment by '<$view field=\"modifier\">(anonymous)</$view>' on <$text text={{!!comment-target}}/></$link>\r\n</div>\r\n</$list>\r\n</div>\r\n</$list>\r\n</div>\r\n"},"$:/plugins/tiddlywiki/comments/styles":{"title":"$:/plugins/tiddlywiki/comments/styles","tags":"[[$:/tags/Stylesheet]]","text":"\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline\n\n.tc-is-comment-header {\r\n\tbackground: #c1e1e9;\r\n\tpadding: 0.25em;\r\n}\n\n.tc-comments-segment {\r\n\tborder-top: 2px solid #c1e1e9;\r\n}\n\n.tc-comment-button button {\r\n\twidth: 100%;\r\n\ttext-align: right;\r\n}\n\n.tc-comment-button button svg {\r\n\tfill: #26cb56;\r\n\theight: 2em;\r\n\twidth: 2em;\r\n}\n\n.tc-comments {\r\n}\n\n.tc-comment-list {\r\n\tlist-style: none;\r\n     padding-left: 0;\r\n}\n\n.tc-comment-list .tc-comments {\r\n\tpadding-left: 1em;\r\n}\n\n.tc-comment-entry {\r\n\tborder: 1px solid #c1e1ea;\r\n\tmargin: 0.5em 0 0 0;\r\n\tbackground: #dbf6ff;\r\n}\n\n.tc-comment-entry-heading {\r\n\tfont-size: 0.7em;\r\n\tfont-weight: bold;\r\n\ttext-transform: uppercase;\r\n\tbackground: #c1e1ea;\r\n\tcolor: #5B6D80;\r\n\tpadding: 0 0.5em;\r\n}\n\n.tc-comment-entry-body {\r\n\tfont-size: 0.8em;\r\n\tpadding: 0 0.5em;\r\n}\n\n.tc-comment-entry-body textarea {\r\n\tfont-size: 1.1em;\r\n\twidth: 100%\r\n}\r\n"}}}